<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bulk Order Form</title>
  <!-- Include Select2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 12px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    .select2 {
      width: 100% !important;
      font-size: 12px;
      /* Adjust this size as needed */
    }

    .func {
      margin-top: 10px;
    }

    th,
    td {
      padding: 5px;
      text-align: left;
    }

    tr {
      padding-bottom: 5px;
    }

    th {
      background-color: #f4f4f4;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 0px;
      box-sizing: border-box;
    }

    .form-group select[name="product_name[]"],
    .form-group input[name="notes[]"] {
      font-size: 12px;
    }

    .form-group input[type="number"] {
      font-size: 12px;
    }

    .form-group select[name="unit[]"] {
      font-size: 12px;

    }

    .form-group input[name="quantity[]"],
    .form-group input[name="delivered_quantity[]"],
    .form-group input[name="bo_quantity[]"] {
      font-size: 12px;
    }

    .form-group button {
      padding: 10px 20px;
      background-color: #0073e6;
      color: #fff;
      border: none;
      cursor: pointer;
    }

    .print-section {
      margin-top: 20px;
    }

    .print-section table {
      margin-top: 20px;
    }

    /* Column width adjustments */
    #order-table th:nth-child(1),
    #order-table td:nth-child(1) {
      width: 14.28%
        /* Product Name */
    }

    #order-table th:nth-child(2),
    #order-table td:nth-child(2) {
      width: 14.28%
        /* Quantity */
    }

    #order-table th:nth-child(3),
    #order-table td:nth-child(3) {
      width: 14.28%
        /* Unit */
    }

    #order-table th:nth-child(4),
    #order-table td:nth-child(4) {
      width: 14.28%
        /* Delivered Quantity */
    }

    #order-table th:nth-child(5),
    #order-table td:nth-child(5) {
      width: 18.28%
        /* Notes */
    }

    #order-table th:nth-child(6),
    #order-table td:nth-child(6) {
      width: 14.28%
        /* B.O. Quantity */
    }

    #order-table th:nth-child(7),
    #order-table td:nth-child(7) {
      width: 10.28%
        /* B.O. Quantity */
    }

    /* Ensure the input field in Delivered Quantity column fits within the column */
    #order-table td:nth-child(4) input {
      width: 100%;
      /* Full width of the column */
      box-sizing: border-box;
      /* Include padding and border in the width calculation */
    }

    #order-table td:nth-child(2) input {
      width: 100%;
      /* Full width of the column */
      box-sizing: border-box;
      /* Include padding and border in the width calculation */
    }

    #order-table td:nth-child(3) select {
      width: 100%;
      /* Full width of the column */
      box-sizing: border-box;
      /* Include padding and border in the width calculation */
    }

    #order-table td:nth-child(6) input {
      width: 100%;
      /* Full width of the column */
      box-sizing: border-box;
      /* Include padding and border in the width calculation */

    }

    #order-table td:nth-child(1) select {
      width: 100%;
      /* Full width of the column */
      box-sizing: border-box;
      /* Include padding and border in the width calculation */
    }

    #order-table td:nth-child(5) input {
      width: 100%;
      /* Full width of the column */
      box-sizing: border-box;
      /* Include padding and border in the width calculation */
    }

    .print-section {
      margin: 20px;
      padding: 20px;
      background-color: #f9f9f9;
    }

    #summary-table {
      width: 100%;
      border-collapse: collapse;
    }

    #summary-table th,
    #summary-table td {
      padding: 12px;

      text-align: left;
      font-size: 14px;
      /* Adjust font size for better readability */
    }

    #summary-table th {
      background-color: #f4f4f4;
    }

    /* Default table layout */
    #order-table {
      table-layout: fixed;
      width: 100%;
      border-collapse: collapse;
    }

    #order-table th,
    #order-table td {
      padding: 5px;
      text-align: left;
    }

    /* Alternating row colors */
    #order-table tbody tr:nth-child(even) {
      background-color: #f4f4f4;
      /* Light gray for even rows */
    }

    #order-table tbody tr:nth-child(odd) {
      background-color: #e0e0e0;
      /* Darker gray for odd rows */
    }

    /* Mobile-specific styles */
    @media (max-width: 768px) {
      #order-table {
        display: block;
        width: 100%;
      }

      #order-table thead {
        display: none;
        /* Hide table headers on mobile */
      }

      #order-table tbody,
      #order-table tr {
        display: block;
        width: 100%;
        margin-bottom: 0px;
        /* Add space between rows */
      }

      #order-table td {
        display: block;
        width: 100%;
        box-sizing: border-box;
        padding: 3px 3px;
        border: none;
        /* Remove borders for mobile */
      }

      /* Style the product name cell */
      #order-table td:nth-child(1) {
        display: block;
        width: 100%;
        margin-bottom: 0px;
        /* Space between product name and other columns */
        font-weight: bold;
        /* Emphasize product name */
      }

      /* Style other cells to stack below the product name */
      #order-table td:not(:first-child) {
        display: block;
        width: 100%;
        margin-bottom: 0px;
        /* Space between columns */
      }

      /* Optional: Add labels before content for better clarity */
      #order-table td::before {
        content: attr(data-label);
        font-weight: bold;
        display: block;
        margin-bottom: 1px;
        margin-top: 1px
      }

      #order-table td:nth-child(2)::before {
        content: "QTY";
      }

      #order-table td:nth-child(3)::before {
        content: "Unit";
      }

      #order-table td:nth-child(4)::before {
        content: "Dlv. QTY";
      }

      #order-table td:nth-child(5)::before {
        content: "Notes";
      }

      #order-table td:nth-child(6)::before {
        content: "B.O. QTY";
      }
    }



    /* Print-specific styles */
    @media print {
      body {
        margin: 0;
        /* Remove default margins */
        padding: 0;
        /* Remove default padding */
      }

      /* Hide everything except the print section */
      #bulk-order-form,
      #order-table,
      .title-order {
        display: none;
      }

      .print-section {
        display: block;
        /* Ensure the print section is displayed */
        padding: 20px;
        /* Ensure there is padding around the content */
        margin: 0;
        /* Remove margins for print view */
        page-break-inside: avoid;
        /* Avoid breaking inside the print section */
      }

      #summary-table {
        width: 100%;
        border-collapse: collapse;
      }

      #summary-table th,
      #summary-table td {
        padding: 15px;
        /* Increase padding for more spacing */
        border: none;
        /* Remove borders */
        text-align: left;
        font-size: 16px;
        /* Larger font size for clarity in print */
      }

      #summary-table th {
        background-color: #e0e0e0;
        /* Slightly darker background for headers */
      }

      /* Add spacing between rows for better readability */
      #summary-table tr {
        border-bottom: 1px solid #ddd;
        /* Border between rows */
      }

      #summary-table tr:last-child {
        border-bottom: none;
        /* Remove border from last row */
      }

      /* Ensure that the document fits well on pages */
      @page {
        size: auto;
        /* Auto size for pages */
        margin: 20mm;
        /* Set margins for the page */
      }
    }
  </style>
</head>

<body>

  <h2 class="title-order">Order Form</h2>

  <form id="bulk-order-form">
    <table id="order-table">
      <thead>
        <tr>
          <th>Product</th>
          <th>QTY</th>
          <th>Unit</th>
          <th>Dlv. QTY</th>
          <th>Notes</th>
          <th>B.O. QTY</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <select name="product_name[]" class="select2" required>
              <option value="Product A">Product A</option>
              <option value="Product B">Product B</option>
              <option value="Product C">Product C</option>
            </select>
          </td>
          <td><input type="number" name="quantity[]" min="0" required></td>
          <td>
            <select name="unit[]" required>
              <option value="pcs">pcs</option>
              <option value="kg">kg</option>
              <option value="ltr">ltr</option>
            </select>
          </td>
          <td><input type="number" name="delivered_quantity[]" min="0" required></td>
          <td><input type="text" name="notes[]"></td>
          <td><input type="number" name="bo_quantity[]" min="0"></td>
          <td><button type="button" class="delete-row" onclick="deleteRow(this)">Delete</button></td>
          <!-- Delete button added -->
        </tr>
      </tbody>
    </table>
    <button class="func" type="button" onclick="addRow()">Add Product</button>
    <button class="func" type="button" onclick="printTable()">Print Order</button>
  </form>

  <div class="print-section" id="print-section" style="display: none;">
    <h2>Order Summary</h2>
    <table id="summary-table">
      <thead>
        <tr>
          <th>Product</th>
          <th>QTY</th>
          <th>Unit</th>
          <th>Dlv. QTY</th>
          <th>Notes</th>
          <th>B.O. QTY</th>
        </tr>
      </thead>
      <tbody>
        <!-- Data will be populated here -->
      </tbody>
    </table>
  </div>

  <!-- Include jQuery and Select2 JS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
  <script>
    // Initialize Select2 for existing select elements
    function initializeSelect2() {
      $('.select2').select2({
        placeholder: 'Select a product',
        allowClear: true
      });
    }

    // Initialize Select2 on page load
    $(document).ready(function () {
      initializeSelect2();
    });

    function addRow() {
      const tableBody = $('#order-table tbody');
      const newRow = `
        <tr>
          <td>
            <select name="product_name[]" class="select2" required>
              <option value="Product A">Product A</option>
              <option value="Product B">Product B</option>
              <option value="Product C">Product C</option>
            </select>
          </td>
          <td><input type="number" name="quantity[]" min="0" required></td>
          <td>
            <select name="unit[]" required>
              <option value="pcs">pcs</option>
              <option value="kg">kg</option>
              <option value="ltr">ltr</option>
            </select>
          </td>
          <td><input type="number" name="delivered_quantity[]" min="0" required></td>
          <td><input type="text" name="notes[]"></td>
          <td><input type="number" name="bo_quantity[]" min="0"></td>
          <td><button type="button" class="delete-row">Delete</button></td> <!-- Add this line -->
        </tr>
      `;
      tableBody.append(newRow);
      initializeSelect2(); // Re-initialize Select2 for new rows
    }

    function printTable() {
      const tableRows = $('#order-table tbody tr');
      const summaryTableBody = $('#summary-table tbody');
      summaryTableBody.empty(); // Clear previous content

      tableRows.each(function () {
        const cells = $(this).find('td');
        const newRow = `
          <tr>
            <td>${$(cells[0]).find('select').find('option:selected').text()}</td>
            <td>${$(cells[1]).find('input').val()}</td>
            <td>${$(cells[2]).find('select').find('option:selected').text()}</td>
            <td>${$(cells[3]).find('input').val()}</td>
            <td>${$(cells[4]).find('input').val()}</td>
            <td>${$(cells[5]).find('input').val()}</td>
          </tr>
        `;
        summaryTableBody.append(newRow);
      });

      // Show the print section
      $('#print-section').show();

      // Print the content
      window.print();

      // Hide the print section after printing
      $('#print-section').hide();
    }

    // Add row delete functionality
    $(document).on('click', '.delete-row', function () {
      $(this).closest('tr').remove(); // Remove the closest row
    });
  </script>
</body>

</html>