<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Generator</title>
    <style>
        #invoice {
            width: 800px;
            height: 600px;
            border: 1px solid #000;
            padding: 20px;
        }
    </style>
</head>

<body>
    <div id="invoice">
        <svg id="invoice-svg" width="800" height="600" xmlns="http://www.w3.org/2000/svg">
            <rect x="10" y="10" width="780" height="580" fill="#fff" stroke="#000" stroke-width="2" />
            <text x="20" y="40" font-size="24" font-weight="bold">Invoice</text>
            <text x="20" y="80" font-size="18">Date: 2024-08-20</text>
            <text x="20" y="120" font-size="18">To: Customer Name</text>
            <text x="20" y="160" font-size="18">Address: Customer Address</text>
            <text x="20" y="200" font-size="18">Items:</text>
            <text x="20" y="240" font-size="18">1. Item Description - $100</text>
            <text x="20" y="280" font-size="18">2. Another Item - $150</text>
            <text x="20" y="320" font-size="18">Total: $250</text>
        </svg>
    </div>
    <button id="download">Download as PNG</button>

    <script src="https://cdn.jsdelivr.net/npm/canvg@3.0.11/dist/browser/canvg.min.js"></script>
    <script>
        document.getElementById('download').addEventListener('click', function () {
            const svg = document.getElementById('invoice-svg');
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            canvas.width = svg.clientWidth;
            canvas.height = svg.clientHeight;

            // Use Canvg to render the SVG to the canvas
            canvg(canvas, svg.outerHTML, {
                ignoreAnimation: true,
                ignoreDimensions: true,
                ignoreMouse: true
            });

            // Convert the canvas to a PNG data URL
            const pngUrl = canvas.toDataURL('image/png');

            // Create a link and trigger a download
            const link = document.createElement('a');
            link.href = pngUrl;
            link.download = 'invoice.png';
            link.click();
        });
    </script>
</body>

</html>